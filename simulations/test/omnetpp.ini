[General]
sim-time-limit = 60s
**.vector-recording = true
**.scalar-recording = true

*.**.radio.antenna.mobilityModule = "^.^.^.mobility"
# Network configuration
network = abcd.simulations.Hybrid

# Enable logging output
**.cmdenv-log-level = INFO



# Disable static IP for Wi-Fi
**.ue[*].wlan[0].ipv4.assignAddress = false
**.ue[*].wlan[0].ipv4.useDhcp = true

# DHCP server on AP
**.accessPoint.wlan[0].ipv4.dhcpServer.typename = "DhcpServer"

# RIP on Wi-Fi routers and nodes
**.wifiRouter.ipv4.routingProtocol = "RIP"
**.ue[*].ipv4.routingProtocol = "RIP"
**.server.ipv4.routingProtocol = "RIP"

# RIP startup delay (let DHCP finish first)
**.ipv4.RIP.startupTime = 1s

**.ue[*].cellularNic.interfaceName = "lte0"
**.ue[*].wlan[0].interfaceName = "wlan0"


*.numUe = 1

# Basic LTE configuration
**.ueTxPower = 26
**.eNodeBTxPower = 40
**.ue[*].masterId = 1
**.ue[*].macCellId = 1

# Mobility configuration
**.mobility.constraintAreaMinZ = 0m
**.mobility.constraintAreaMaxZ = 0m

# WiFi radio configuration
**.radioMedium.typename = "Ieee80211ScalarRadioMedium"
**.wlan[*].radio.typename = "Ieee80211ScalarRadio"
**.accessPoint.wlan[*].radio.typename = "Ieee80211ScalarRadio"

[Config VoIPWithHandover]
extends = General


# UE mobility - moves from LTE coverage to WiFi coverage

**.ue[*].mobility.typename = "StationaryMobility"
**.ue[*].mobility.speed = 5kmph
**.ue[*].mobility.angle = 45deg
**.ue[*].mobility.initialX = 450m
**.ue[*].mobility.initialY = 450m



# eNB position
**.eNB.mobility.typename = "StationaryMobility"
**.eNB.mobility.initialX = 400m
**.eNB.mobility.initialY = 350m

# Access Point position
**.accessPoint.mobility.typename = "StationaryMobility"
**.accessPoint.mobility.initialX = 600m
**.accessPoint.mobility.initialY = 350m

# Enable QoS for both LTE and WiFi
**.ue[*].lteNic.pdcp.qosEnabled = true
**.eNodeB.nic.pdcp.qosEnabled = true
**.ue[*].wlan.mac.qos.typename = "Ieee80211eQosMac"

# Handover Manager Configuration
**.ue[*].handoverManager.measurementInterval = 0.5s
**.ue[*].handoverManager.lteRsrpThreshold = -95dBm
**.ue[*].handoverManager.wifiRssiThreshold = -75dBm
**.ue[*].handoverManager.hysteresis = 5dB
**.ue[*].handoverManager.handoverDelay = 0.2s
**.ue[*].handoverManager.enableLteToWifi = true
**.ue[*].handoverManager.enableWifiToLte = true
**.ue[*].handoverManager.logHandovers = true

# Enhanced VoIP Application Configuration
**.ue[*].numApps = 2

# VoIP Sender with handover support
**.ue[*].app[*].typename = "VoIPSenderWithHandover"
**.ue[*].app[0].destAddress = "server"
**.ue[*].app[0].destPort = 3000
**.ue[*].app[0].localPort = 3088
**.ue[*].app[0].packetSize = 160B  # G.711 codec
**.ue[*].app[0].packetInterval = 20ms  # 50 packets per second
**.ue[*].app[0].startTime = 1s
**.ue[*].app[0].stopTime = 55s

# Session continuity parameters
**.ue[*].app[0].enableSessionContinuity = true
**.ue[*].app[0].bufferTime = 2s
**.ue[*].app[0].maxRetransmissions = 3
**.ue[*].app[0].handoverDetectionInterval = 0.1s

# VoIP Receiver with handover support
**.ue[*].app[1].typename = "VoIPReceiverWithHandover"
**.ue[*].app[1].localPort = 3001
**.ue[*].app[1].enableSessionContinuity = true
**.ue[*].app[1].jitterBufferSize = 0.1s
**.ue[*].app[1].handoverTimeout = 1s

# Server VoIP applications
**.server.numApps = 2

# Server to UE VoIP
**.server.app[*].typename = "VoIPSenderWithHandover"
**.server.app[0].destAddress = "ue[0]"
**.server.app[0].destPort = 3001
**.server.app[0].localPort = 3089
**.server.app[0].packetSize = 160B
**.server.app[0].packetInterval = 20ms
**.server.app[0].startTime = 1s
**.server.app[0].stopTime = 55s
**.server.app[0].enableSessionContinuity = true
**.server.app[0].bufferTime = 2s
**.server.app[0].maxRetransmissions = 3

# Server VoIP receiver
**.server.app[1].typename = "VoIPReceiverWithHandover"
**.server.app[1].localPort = 3000
**.server.app[1].enableSessionContinuity = true
**.server.app[1].jitterBufferSize = 0.1s
**.server.app[1].handoverTimeout = 1s

# Statistics collection
**.ue[*].app[*].**.result-recording-modes = +vector
**.server.app[*].**.result-recording-modes = +vector
**.ue[*].handoverManager.**.result-recording-modes = +vector

[Config VoIPStaticLTE]
extends = General

# Static test - UE stays in LTE coverage
**.ue[*].mobility.typename = "StationaryMobility"
**.ue[*].mobility.initialX = 450m
**.ue[*].mobility.initialY = 400m

**.eNB.mobility.typename = "StationaryMobility"
**.eNB.mobility.initialX = 400m
**.eNB.mobility.initialY = 350m

**.accessPoint.mobility.typename = "StationaryMobility"
**.accessPoint.mobility.initialX = 600m
**.accessPoint.mobility.initialY = 350m

# Disable handovers for baseline comparison
**.ue[*].handoverManager.enableLteToWifi = false
**.ue[*].handoverManager.enableWifiToLte = false

# Standard VoIP applications
**.ue[*].numApps = 2
**.ue[*].app[0].typename = "SimpleVoipSender"
**.ue[*].app[0].destAddress = "server"
**.ue[*].app[0].destPort = 3000
**.ue[*].app[0].localPort = 3088
**.ue[*].app[0].packetSize = 160B
**.ue[*].app[0].startTime = 1s

**.ue[*].app[1].typename = "SimpleVoipReceiver"
**.ue[*].app[1].localPort = 3001

**.server.numApps = 1
**.server.app[0].typename = "SimpleVoipSender"
**.server.app[0].destAddress = "ue[0]"
**.server.app[0].destPort = 3001
**.server.app[0].localPort = 3089
**.server.app[0].packetSize = 160B
**.server.app[0].startTime = 1s

[Config VoIPStaticWiFi]
extends = General

# Static test - UE stays in WiFi coverage
**.ue[*].mobility.typename = "StationaryMobility"
**.ue[*].mobility.initialX = 580m
**.ue[*].mobility.initialY = 370m

**.eNB.mobility.typename = "StationaryMobility"
**.eNB.mobility.initialX = 400m
**.eNB.mobility.initialY = 350m

**.accessPoint.mobility.typename = "StationaryMobility"
**.accessPoint.mobility.initialX = 600m
**.accessPoint.mobility.initialY = 350m

# Force WiFi usage
**.ue[*].handoverManager.lteRsrpThreshold = -50dBm  # Very high threshold
**.ue[*].handoverManager.wifiRssiThreshold = -90dBm  # Very low threshold

# Enhanced VoIP applications
**.ue[*].numApps = 2
**.ue[*].app[0].typename = "VoIPSenderWithHandover"
**.ue[*].app[0].destAddress = "server"
**.ue[*].app[0].destPort = 3000
**.ue[*].app[0].localPort = 3088
**.ue[*].app[0].packetSize = 160B
**.ue[*].app[0].startTime = 1s
**.ue[*].app[0].enableSessionContinuity = true

**.ue[*].app[1].typename = "VoIPReceiverWithHandover"
**.ue[*].app[1].localPort = 3001
**.ue[*].app[1].enableSessionContinuity = true

**.server.numApps = 2
**.server.app[0].typename = "VoIPSenderWithHandover"
**.server.app[0].destAddress = "ue[0]"
**.server.app[0].destPort = 3001
**.server.app[0].localPort = 3089
**.server.app[0].packetSize = 160B
**.server.app[0].startTime = 1s
**.server.app[0].enableSessionContinuity = true

**.server.app[1].typename = "VoIPReceiverWithHandover"
**.server.app[1].localPort = 3000
**.server.app[1].enableSessionContinuity = true

[Config PerformanceComparison]
extends = General

# Run multiple scenarios for comparison
repeat = 5
seed-set = ${repetition}

# Test different handover thresholds
**.ue[*].handoverManager.lteRsrpThreshold = -90dBm
**.ue[*].handoverManager.wifiRssiThreshold = -80dBm

# UE mobility pattern to test performance across coverage areas
**.ue[*].mobility.typename = "LinearMobility"
**.ue[*].mobility.speed = 4mps
**.ue[*].mobility.angle = 30deg
**.ue[*].mobility.initialX = 300m
**.ue[*].mobility.initialY = 400m

# eNB and Access Point positions (consistent)
**.eNB.mobility.typename = "StationaryMobility"
**.eNB.mobility.initialX = 400m
**.eNB.mobility.initialY = 350m

**.accessPoint.mobility.typename = "StationaryMobility"
**.accessPoint.mobility.initialX = 600m
**.accessPoint.mobility.initialY = 350m

# Enable full bidirectional handovers
**.ue[*].handoverManager.enableLteToWifi = true
**.ue[*].handoverManager.enableWifiToLte = true

# VoIP Application Configuration with session continuity
**.ue[*].numApps = 2

**.ue[*].app[0].typename = "VoIPSenderWithHandover"
**.ue[*].app[0].destAddress = "server"
**.ue[*].app[0].destPort = 3000
**.ue[*].app[0].localPort = 3088
**.ue[*].app[0].packetSize = 160B
**.ue[*].app[0].packetInterval = 20ms
**.ue[*].app[0].startTime = 1s
**.ue[*].app[0].enableSessionContinuity = true

**.ue[*].app[1].typename = "VoIPReceiverWithHandover"
**.ue[*].app[1].localPort = 3001
**.ue[*].app[1].enableSessionContinuity = true

# Server applications
**.server.numApps = 2
**.server.app[0].typename = "VoIPSenderWithHandover"
**.server.app[0].destAddress = "ue[0]"
**.server.app[0].destPort = 3001
**.server.app[0].localPort = 3089
**.server.app[0].packetSize = 160B
**.server.app[0].packetInterval = 20ms
**.server.app[0].startTime = 1s
**.server.app[0].enableSessionContinuity = true

**.server.app[1].typename = "VoIPReceiverWithHandover"
**.server.app[1].localPort = 3000
**.server.app[1].enableSessionContinuity = true

# Statistics collection
**.ue[*].app[*].**.result-recording-modes = +vector
**.server.app[*].**.result-recording-modes = +vector
**.ue[*].handoverManager.**.result-recording-modes = +vector

[Config PerformanceComparison_Variant2]
extends = PerformanceComparison
**.ue[*].handoverManager.lteRsrpThreshold = -85dBm
**.ue[*].handoverManager.wifiRssiThreshold = -75dBm